# 注册接口

写一个接口，实现用户注册功能，用户注册需要提供用户名、密码、手机号、邮箱等信息。都是必填的，除了手机号，其他信息需要进行校验，用户名需要4-16位字符，密码需要6-18位字符，手机号需要符合国内手机号规则，邮箱需要符合邮箱规则。

手机号、邮箱，其他信息都需要进行脱敏处理。手机号脱敏规则为保留前三位和后四位，中间用4个星号代替。邮箱脱敏规则为用户名@域名，用户名保留前两位，后面用3个星号代替。

手机号和邮箱需要进行唯一性校验，即不能重复注册。

用户名（20）、手机号（11）、邮箱（100）需要进行数据库字段长度校验，不能超过数据库字段长度。

用户名需要进行敏感词校验，不能包含敏感词。

手机号需要进行短信验证码校验，需要调用短信验证码服务接口。

邮箱需要进行邮箱验证码校验，需要调用邮箱验证码服务接口。

手机号、邮箱，其他信息都需要进行数据库存储,除了用户名，手机号，邮箱，密码都要加密存储，手机号，邮箱使用RAS对称加密，密码采用非对称加密，即无法解密。


实现步骤：
1.设计数据库的表，基于mysql ,并生成对应的jpa实体类，和数据库操作方法；
2.基于springMVC定义接口，post方式，请求参数放在body中定义实体接受。返回参数使用R包装；
3.注册逻辑：a.进行常规校验；b.进行邮箱（基于验证码）和手机号码（基于短信验证码）的校验；c.加密和脱敏入库；d.返回结果；d.给出测试用例，单元测试用例，以及基于jmeter给出性能测试用例脚本；
4.代码单独建立对应的包： package com.joysky.ms.ct.login 


# 发送手机验证码接口

url: post /api/users/sms-code

参数： 放在body中

phone: 手机号
imgCode: 图形验证码
imgUuid: 图形验证码的Uuid

返回参数：

code: 0 表示成功，其他表示失败
msg: 提示信息

## 获取图形验证码接口

url: get /api/users/img-code

参数：无

返回参数：

code: 0 表示成功，其他表示失败
msg: 提示信息
data:
    imgCode: 图形验证码的base64编码
    imgUuid: 图形验证码的Uuid

处理过程： 
1. 前端调用获取图形验证码接口，获取到图形验证码的base64编码和imgUuid
2. 前端将图形验证码的base64编码展示到页面上
3. 后端图形验证码放到内存式缓存中，使用guava-cache . 过期时间为30秒；